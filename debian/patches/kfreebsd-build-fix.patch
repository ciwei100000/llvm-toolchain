--- lldb.orig/source/Plugins/Process/FreeBSD/ProcessPOSIX.cpp
+++ lldb/source/Plugins/Process/FreeBSD/ProcessPOSIX.cpp
@@ -214,11 +214,24 @@ ProcessPOSIX::DoLaunch (Module *module,
     int terminal = m_monitor->GetTerminalFD();
     if (terminal >= 0) {
         // The reader thread will close the file descriptor when done, so we pass it a copy.
+#ifdef F_DUPFD_CLOEXEC
         int stdio = fcntl(terminal, F_DUPFD_CLOEXEC, 0);
         if (stdio == -1) {
             error.SetErrorToErrno();
             return error;
         }
+#else
+        int stdio = fcntl(terminal, F_DUPFD, 0);
+        if (stdio == -1) {
+            error.SetErrorToErrno();
+            return error;
+        }
+        stdio = fcntl(terminal, F_SETFD, FD_CLOEXEC);
+        if (stdio == -1) {
+            error.SetErrorToErrno();
+            return error;
+        }
+#endif
         SetSTDIOFileDescriptor(stdio);
     }
